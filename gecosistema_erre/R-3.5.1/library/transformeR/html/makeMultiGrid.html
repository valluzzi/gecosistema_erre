<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Multigrid constructor</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for makeMultiGrid {transformeR}"><tr><td>makeMultiGrid {transformeR}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Multigrid constructor</h2>

<h3>Description</h3>

<p>Constructs a (possibly multimember) multigrid from different (multimember) grids.
A multigrid can be considered as a &ldquo;stack&rdquo; of grids with similar spatiotemporal extents,
useful to handle sets of predictors as a single block.
</p>


<h3>Usage</h3>

<pre>
makeMultiGrid(..., spatial.tolerance = 0.001, skip.temporal.check = FALSE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>...</code></td>
<td>
<p>Input grids to form the multigrid. These must be compatible in time and space (see details). 
For flexibility, they can be introduced as a list or directly as consecutive arguments.</p>
</td></tr>
<tr valign="top"><td><code>spatial.tolerance</code></td>
<td>
<p>numeric. Coordinate differences smaller than <code>spatial.tolerance</code> will be considered equal 
coordinates. Default to 0.001 &ndash;assuming that degrees are being used it seems a reasonable rounding error after interpolation&ndash;.
This value is passed to the <code><a href="../../base/html/identical.html">identical</a></code> function to check for spatial consistency of the input grids.</p>
</td></tr>
<tr valign="top"><td><code>skip.temporal.check</code></td>
<td>
<p>Logical. Should temporal matching check of input fields be skipped?
Default to <code>FALSE</code>. This option can be useful in order to construct multigrids 
from grids of different temporal characteristics. See details.
(e.g., a multi-seasonal multifield), to be passed to <code><a href="plotClimatology.html">plotClimatology</a></code></p>
</td></tr>
</table>


<h3>Details</h3>

<p>The function makes a number of checks in order to test the spatiotemporal compatibility of the input multi-member grids.
Regarding the temporal concordance, it can be skipped by setting the argument <code>skip.temporal.check</code> to <code>TRUE</code>.
It is implicitly assumed that all temporal data from the different
multimember grids correspond to the same time zone (&quot;GMT&quot;). The time zone itself is not important, as long as it is the
same across datasets, because temporal consistency is checked on a daily basis (not hourly), allowing the inclusion of 
predictors with different verification times and temporal aggregations. For instance, instantaneous geopotential at 12:00 
is compatible with mean daily surface temperature, always that both variables correspond to the same days. Different time 
resolutions are not compatible and will return an error (for instance, 6-hourly data is incompatible with daily values, 
because their respective time series for a given season have different lengths).
</p>
<p>The spatial consistency of the input grids is also checked. In order to avoid possible errors from the user, the spatial
consistency (i.e., equal XY coordinates) of the input grids must be ensured before attempting the creation of the multigrid,
otherwise giving an error. This can be achieved either through the specification of the same 'lonLim' and 'latLim' argument
values when loading the grids, or using the <code><a href="interpGrid.html">interpGrid</a></code> interpolator in conjuntion with the <code><a href="getGrid.html">getGrid</a></code>
method.
</p>
<p>StrongVariable names 
</p>
<p>When a vertical level of the variable is defined (i.e., is not <code>NA</code>), 
the short name of the variable is modified to the standard format <code>"var@level"</code> 
(e.g., <code>"ta@850"</code> for air temperature at 850mb surface pressure level). This way, the same
variable at different vertical levels can be differentiated at a glance using <code><a href="getVarNames.html">getVarNames</a></code>, 
for instance.
</p>


<h3>Value</h3>

<p>A (multimember) multigrid object encompassing the different input (multimember) grids
</p>


<h3>Note</h3>

<p>A multigrid can not be passed to the interpolator <code><a href="interpGrid.html">interpGrid</a></code> directly. Instead, the 
multimember grids should be interpolated individually prior to multigrid construction.
</p>


<h3>Author(s)</h3>

<p>J. Bedia
</p>


<h3>See Also</h3>

<p><code><a href="interpGrid.html">interpGrid</a></code> for spatial consistency of input grids.
</p>
<p>Other downscaling.helpers: <code><a href="convert2bin.html">convert2bin</a></code>,
<code><a href="filterNA.html">filterNA</a></code>
</p>


<h3>Examples</h3>

<pre>
# Creation of a multigrid from three different grids:
data(NCEP_Iberia_ta850)
data(NCEP_Iberia_hus850)
data(NCEP_Iberia_psl)
# An example of different temporal aggregations, temporally compatible:
# sea-level pressure is a daily mean, while specific humidity and air temperature
# (850 mb surface isobaric pressure level) are instantaneous data verifying at 12:00 UTC:
# air temperature
mf &lt;- makeMultiGrid(NCEP_Iberia_hus850, NCEP_Iberia_psl, NCEP_Iberia_ta850)

# The new object inherits the global attributes from the first grid, as it is assumed
# that all input grids come from the same data source:
attributes(mf)
# The data structure has now one additional dimension ("var"), along which the data arrays
# have been binded:
str(mf$Data)

# Example of multimember multigrid creation from several multimember grids:
# Load three different multimember grids with the same spatiotemporal ranges:
data("CFS_Iberia_tas")
data("CFS_Iberia_hus850")
data("CFS_Iberia_pr")
mm.mf &lt;- makeMultiGrid(CFS_Iberia_tas, CFS_Iberia_hus850, CFS_Iberia_pr)
# Different fields should not be plotted together in the same plot directly, unless 
# their units are compatible.
# subsetGrid and visualizeR::spatialPlot can be used to this aim, if needed.
# For instance:
# tas &lt;- subsetGrid(mm.mf, var = "tas")
# require(visualizeR)
# spatialPlot(climatology(tas), backdrop.theme = "coastline", rev.colors = TRUE)
</pre>

<hr /><div style="text-align: center;">[Package <em>transformeR</em> version 1.4.2 <a href="00Index.html">Index</a>]</div>
</body></html>
