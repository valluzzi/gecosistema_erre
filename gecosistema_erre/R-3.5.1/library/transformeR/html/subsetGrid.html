<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Select an arbitrary subset from a grid or multigrid along one...</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="R.css" />
</head><body>

<table width="100%" summary="page for subsetGrid {transformeR}"><tr><td>subsetGrid {transformeR}</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>Select an arbitrary subset from a grid or multigrid along one or more of its dimensions</h2>

<h3>Description</h3>

<p>Create a new grid/multigrid that is a subset of the input grid along the selected dimensions
</p>


<h3>Usage</h3>

<pre>
subsetGrid(grid, var = NULL, runtime = NULL, members = NULL,
  years = NULL, season = NULL, lonLim = NULL, latLim = NULL,
  outside = FALSE, station.id = NULL, drop = TRUE)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>grid</code></td>
<td>
<p>The input grid or station data to be subset. This is either a grid (or station data), as 
returned e.g. by <code>loadeR::loadGridData</code> (or <code>loadeR::loadStationData</code>), a
multigrid, as returned by <code>makeMultiGrid</code>, or other types of multimember grids
(possibly multimember grids) as returned e.g. by <code>loadeR.ECOMS::loadECOMS</code>.</p>
</td></tr>
<tr valign="top"><td><code>var</code></td>
<td>
<p>Character vector indicating the variables(s) to be extracted. (Used for multigrid subsetting). See details.</p>
</td></tr>
<tr valign="top"><td><code>runtime</code></td>
<td>
<p>An integer vector indicating <strong>the position</strong> of the runtimes to be subset.</p>
</td></tr>
<tr valign="top"><td><code>members</code></td>
<td>
<p>An integer vector indicating <strong>the position</strong> of the members to be subset.</p>
</td></tr>
<tr valign="top"><td><code>years</code></td>
<td>
<p>The years to be selected. Note that this can be either a continuous or discontinuous
series of years, the latter option often used in a cross-validation framework.
See details for year-crossing seasons. Default to <code>NULL</code> (no subsetting is performed on the time dimension).</p>
</td></tr>
<tr valign="top"><td><code>season</code></td>
<td>
<p>An integer vector indicating the months to be subset.</p>
</td></tr>
<tr valign="top"><td><code>lonLim</code></td>
<td>
<p>Vector of length = 2, with minimum and maximum longitude coordinates, in decimal degrees,
of the bounding box defining the subset. For single-point subsets, a numeric value with the
longitude coordinate. If <code>NULL</code> (default), no subsetting is performed on the longitude dimension</p>
</td></tr>
<tr valign="top"><td><code>latLim</code></td>
<td>
<p>Same as <code>lonLim</code> argument, but for latitude.</p>
</td></tr>
<tr valign="top"><td><code>outside</code></td>
<td>
<p>if TRUE subset coordinates outside the grid extent are allowed. Default is FALSE.</p>
</td></tr>
<tr valign="top"><td><code>station.id</code></td>
<td>
<p>Station ID (check <code>$Metadata$station_id</code>).</p>
</td></tr>
<tr valign="top"><td><code>drop</code></td>
<td>
<p>Logical (default is TRUE). Drop or keep dimensions of length 1.</p>
</td></tr>
</table>


<h3>Details</h3>

<p>The attribute <code>subset</code> will be added to the different slots corresponding to the subset dimensions, taking
the value of the subroutine called in each case (e.g.: attribute subset will have the value <code>subsetSpatial</code>
in the xyCoords slot after spatial subsetting...).
</p>
<p><strong>Time slicing by years</strong>
</p>
<p>In case of year-crossing seasons (e.g. boreal winter (DJF), <code>season = c(12,1,2)</code>),
the season is assigned to the years of January and February 
(i.e., winter of year 2000 corresponds to Dec 1999, Jan 2000 and Feb 2000). Thus, 
the <code>years</code> argument must be introduced accordingly (See e.g. <code><a href="getYearsAsINDEX.html">getYearsAsINDEX</a></code>
function for details).
</p>
<p><strong>Spatial slicing</strong>
</p>
<p>Spatial subset definition is done via the <code>lonLim</code> and <code>latLim</code> arguments, in the same way as
for instance the <code>loadGridData</code> function, from package <span class="pkg">loadeR</span>, with the exception that several checks are undertaken
to ensure that the subset is actually within the current extent of the input grid. It is also possible to
make single-point selections from a grid, just by specifying a single coordinate instead of a range
as the argument value. For instance <code>lonLim = c(-10,10)</code> and <code>latLim = c(35,45)</code> indicate a
rectangular window centered in the Iberian Peninsula), and single grid-cell values
(for instance <code>lonLim = -3.21</code> and <code>latLim = 41.087</code> for retrieving the data in the closest grid
point to the point coordinate -3.21E, 41.087N. In the last two cases, the function
operates by finding the nearest (euclidean distance) grid-points to the coordinates introduced.
</p>
<p><strong>Extracting grids from multigrids</strong>
</p>
<p>One or several variables from a multigrid object can be extracted. Note that argument <code>var</code> is 
insensitive to the order of the variables, i.e.: variables will be always returned in the same order
they are in the original multigrid.
</p>


<h3>Value</h3>

<p>A new grid object that is a logical subset of the input grid along the specified dimensions.
</p>


<h3>Author(s)</h3>

<p>J. Bedia, M. Iturbide
</p>


<h3>See Also</h3>

<p>Other subsetting: <code><a href="getTemporalIntersection.html">getTemporalIntersection</a></code>,
<code><a href="intersectGrid.spatial.html">intersectGrid.spatial</a></code>,
<code><a href="intersectGrid.time.html">intersectGrid.time</a></code>,
<code><a href="intersectGrid.html">intersectGrid</a></code>, <code><a href="overGrid.html">overGrid</a></code>,
<code><a href="subsetDimension.html">subsetDimension</a></code>,
<code><a href="subsetMembers.html">subsetMembers</a></code>, <code><a href="subsetRuntime.html">subsetRuntime</a></code>,
<code><a href="subsetSeason.html">subsetSeason</a></code>, <code><a href="subsetSpatial.html">subsetSpatial</a></code>,
<code><a href="subsetStation.html">subsetStation</a></code>, <code><a href="subsetVar.html">subsetVar</a></code>,
<code><a href="subsetYears.html">subsetYears</a></code>
</p>


<h3>Examples</h3>

<pre>
## Not run: 
# Example 1 - Spatial / member subset
data("CFS_Iberia_tas")
# Selection of a smaller domain over the Iberian Peninsula and members 3 and 7
sub &lt;- subsetGrid(CFS_Iberia_tas,
                  members = c(3,7),
                  lonLim = c(-10,-5),
                  latLim = c(36,43))
require(visualizeR)                  
spatialPlot(climatology(sub), tol = 0.005, contour = TRUE,
                backdrop.theme = "coastline", rev.colors = TRUE)
## Example 2 - Subsetting a multimember multigrid by variables
# Multimember multigrid creation
data("CFS_Iberia_pr", "CFS_Iberia_hus850")
mm.mf &lt;- makeMultiGrid(CFS_Iberia_tas, CFS_Iberia_pr, CFS_Iberia_hus850)
# Extracting just minimum temperature
sub1 &lt;- subsetGrid(mm.mf, var = "tas", members = 1:4)
spatialPlot(climatology(sub1, by.member = TRUE), backdrop.theme = "coastline",
     rev.colors = TRUE)
# Extracting precipitation and maximum temperature
# (Note that the grid variables are NOT re-ordered)
sub2 &lt;- subsetGrid(mm.mf, var = c("pr", "tas"))
getShape(sub2)
getVarNames(sub2)

## End(Not run)
</pre>

<hr /><div style="text-align: center;">[Package <em>transformeR</em> version 1.4.2 <a href="00Index.html">Index</a>]</div>
</body></html>
